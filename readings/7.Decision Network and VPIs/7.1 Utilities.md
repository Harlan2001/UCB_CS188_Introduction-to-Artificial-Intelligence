### 7.1 效用（Utilities）

在讨论理性智能体时，“效用（utility）”的概念反复出现。例如在游戏中，效用值通常是预设的，智能体根据这些效用值选择动作。下面我们讨论生成可行效用函数所需的条件。

理性智能体必须遵循**最大化期望效用原则**——始终选择使期望效用最大的动作。然而，仅当智能体具有理性偏好时，遵循这一原则才有意义。为了构造一个非理性偏好的例子，假设存在三个物品 \(A\)、\(B\) 和 \(C\)，智能体当前持有 \(A\)，并有如下非理性偏好：

- 智能体偏好 \(B\) 胜于 \(A + \$1\)
- 智能体偏好 \(C\) 胜于 \(B + \$1\)
- 智能体偏好 \(A\) 胜于 \(C + \$1\)

一个恶意智能体持有 \(B\) 和 \(C\) 可以通过交易让该智能体不断损失金钱：先用 \(A + \$1\) 换 \(B\)，再用 \(B + \$1\) 换 \(C\)，然后用 \(C + \$1\) 换回 \(A\)，智能体就白白损失 \$3。通过这种方式，智能体可能陷入无休止的循环，损失全部资金。

---

#### 数学上的偏好定义

- 如果智能体偏好奖品 \(A\) 胜于奖品 \(B\)，记作：  
  \(A \succ B\)
- 如果智能体对奖品 \(A\) 与 \(B\) 无偏好（无差异），记作：  
  \(A \sim B\)

**彩票（Lottery）** 是一个包含不同奖品及其对应概率的情形。例如，若 \(A\) 以概率 \(p\) 获得，\(B\) 以概率 \(1-p\) 获得，可记为：  
\[
L = [p, A; (1-p), B]
\]

---

#### 理性偏好的五条公理

1. **可排序性（Orderability）**  
\[
(A \succ B) \vee (B \succ A) \vee (A \sim B)
\]  
智能体必须对任意两个奖品 \(A\) 和 \(B\) 具有偏好或无差异。

2. **传递性（Transitivity）**  
\[
(A \succ B) \wedge (B \succ C) \Rightarrow (A \succ C)
\]  
如果智能体偏好 \(A\) 胜于 \(B\)，且 \(B\) 胜于 \(C\)，则 \(A\) 胜于 \(C\)。

3. **连续性（Continuity）**  
\[
A \succ B \succ C \Rightarrow \exists p [p, A; (1-p), C] \sim B
\]  
若 \(A \succ B \succ C\)，可构造一个介于 \(A\) 与 \(C\) 之间的彩票 \(L\) 使智能体对 \(L\) 与 \(B\) 无差异。

4. **可替代性（Substitutability）**  
\[
A \sim B \Rightarrow [p, A; (1-p), C] \sim [p, B; (1-p), C]
\]  
若智能体对 \(A\) 与 \(B\) 无差异，则在彩票中替换 \(A \leftrightarrow B\) 不影响偏好。

5. **单调性（Monotonicity）**  
\[
A \succ B \Rightarrow (p \ge q) \Leftrightarrow [p, A; (1-p), B] \succeq [q, A; (1-q), B]
\]  
若 \(A \succ B\)，在只涉及 \(A\) 和 \(B\) 的彩票中，智能体偏好赋予 \(A\) 更高概率的彩票。

---

#### 效用函数（Utility Function）

若智能体满足上述五条公理，其行为可以用**期望效用最大化**来描述。即存在实值效用函数 \(U\) 使得：

1. 对偏好奖品：  
\[
U(A) \ge U(B) \Leftrightarrow A \succeq B
\]

2. 对彩票的期望效用：  
\[
U([p_1, S_1; \dots; p_n, S_n]) = \sum_i p_i U(S_i)
\]

若满足这些约束并选择合适算法，智能体实现此效用函数时可保证行为最优。

---

#### 示例：彩票与风险偏好

考虑彩票：
\[
L = [0.5, \$0; 0.5, \$1000]
\]

三种智能体及其效用函数：
- \(A_1: U_1(\$x) = x\)
- \(A_2: U_2(\$x) = \sqrt{x}\)
- \(A_3: U_3(\$x) = x^2\)

选择参加彩票或接受固定支付 \$500，计算各智能体的效用：

| Agent | Lottery | Flat Payment |
|-------|---------|--------------|
| 1     | 500     | 500          |
| 2     | 15.81   | 22.36        |
| 3     | 500000  | 250000       |

计算过程示例：
\[
U_1(L) = 0.5 \cdot 1000 + 0.5 \cdot 0 = 500
\]  
\[
U_2(L) = 0.5 \cdot \sqrt{1000} + 0.5 \cdot \sqrt{0} \approx 15.81
\]  
\[
U_3(L) = 0.5 \cdot 1000^2 + 0.5 \cdot 0^2 = 500000
\]

结果分析：
- \(A_1\) 对彩票与固定支付无差异 → **风险中性（risk-neutral）**
- \(A_2\) 偏好固定支付 → **风险厌恶（risk-averse）**
- \(A_3\) 偏好彩票 → **风险寻求（risk-seeking）**
